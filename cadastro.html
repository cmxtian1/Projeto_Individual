<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastre-se</title>
    <link rel="stylesheet" href="cadastro.css">
</head>
<body>
    <!-- HEADER -->
    <div class='header'>
        <div class='container'>
            <a href="index.html">
                <h1>LookMuay</h1>
            </a>
        </div>
    </div>

    <!-- LOGIN -->
    <div class='cadastro'>
        <div class='container'>
           <div class='cad_media'>
                <h1>Crie sua conta</h1>
                <div class='box'>
                    <form id='form_cadastro' >
                        
                            <div class='entrada'>
                                <label class="label_input" for="nome">Nome completo: </label>
                                <br>
                                <input id='in_nome' name='nome' class='input_user' type="text" autofocus>
                            </div>
                            
                            <div class='entrada'>
                                <label class="label_input" for="dtNasc">Data de nascimento: </label>
                                <br>
                                <input  id='in_dtNasc' name='dtnasc' type="date">
                            </div>
                            
                            <div class='entrada'>
                                <label class="label_input" for='grad'>
                                    Graduação: 
                                </label>
                                <br>
                                <select name='graduacao' id="cor_faixa">
                                    <option value="sem graduação">Sem graduação</option>
                                    <option value="branco">Branco</option>
                                    <option value="branco e vermelho">Branco e vermelho</option>
                                    <option value="vermelho">Vermelho</option>
                                    <option value="vermelho e azul">Vermelho e azul claro</option>
                                    <option value="azul claro">Azul claro</option>
                                    <option value="azul claro e azul escuro">Azul claro e azul escuro</option>
                                    <option value="azul escuro">Azul escuro</option>
                                    <option value="azul escuro e preto">Azul escuro e preto</option>
                                    <option value="preto">Preto</option>
                                    <option value="preto e branco">Preto e branco</option>
                                    <option value="preto, branco e vermelho">Preto, branco e vermelho</option>
                                </select>
                            </div>
                            
                            <div class='entrada'>
                                <label class="label_input" for="email">Email: </label>
                                <br>
                                <input id='in_email' name='email' onkeyup="validar()" class='input_user' type="text">
                            </div>
                    
                        
                            <div class='entrada'>
                                <label class="label_input" for="senha">Senha: </label>
                                <br>
                                <input id='in_senha' name='senha' class='input_user' type="password">
                            </div>
                            
                            <div class='entrada'>
                                <label class="label_input" for="tel">Telefone: </label>
                                <br>
                                <input id='in_tel' name='telefone' class='input_user' type="tel">
                            </div>
                            
                            <div class='entrada'>
                                <label class="label_input" for="acad">Academia: </label>
                                <br>
                                <input id='in_acad' name='academia' class='input_user' type="text">
                            </div>

                                <button onclick='cadastrar()'>
                                    Cadastrar
                                </button>
                            
                    </div>
                </div>
        </div>
    </div>

    <!-- FOOTER -->
    <div class='footer'>
        <h3>Developed by Cristhian &copy;2021</h3>
    </div>
</body>
</html>

<script>
        function limparFormulario() {
        document.getElementById("form_cadastro").reset();
    }

    function cadastrar(){
        var nome = in_nome.value;
        var dtnasc = in_dtNasc.value;
        var email = in_email.value;
        var senha = in_senha.value;
        var tel = in_tel.value;
        var acad = in_acad.value;
        var formulario = new URLSearchParams(new FormData(document.getElementById("form_cadastro")));   


        if(nome == '' || dtnasc == '' || email == '' || senha == '' || tel == '' ){
            alert("Preencha todos os campos")
        }

        fetch("C:\Users\jeferson.m.silva\Music\Banco de dados\script_PI", {
            method: "POST",
            body: formulario
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                window.alert("Cadastro realizado com sucesso!");
                window.location = "index.html";
                limparFormulario();
                
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            
        });

        return false;

    }
    
    function validar(){
        var email = in_email.value;
        if(email.indexOf("@") > -1 && email.indexOf(".com") > -1){
            in_email.style.color = 'green'
        } else{
            in_email.style.color = 'red'
        }
    }
</script>